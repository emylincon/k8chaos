title: Do we remain available after restarting ec2
description: service would be unavailable for a short period of time
configuration:
  aws_profile_name: "sandbox"
  aws_region: "eu-central-1"
  front_url: http://18.156.78.37 # replace with terraform output
steady-state-hypothesis:
  title: Verifying service remains healthy
  probes:
    - type: probe
      name: front-service-must-be-ok
      tolerance: 200
      provider:
        type: http
        url: "${front_url}"
        timeout: 10
method:
  - type: action
    name: restart-instance
    provider:
      func: restart_instances
      module: chaosaws.ec2.actions
      type: python
      arguments:
        az: "eu-central-1a"
    pauses:
      after: 60 # takes about 55 seconds for ec2 instance to be up after restarting
